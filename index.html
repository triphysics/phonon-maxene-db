<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MX-PHon – MXene Phonon Database</title>
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css">
  <style>
    body {
      font-family: "Helvetica Neue", Arial, sans-serif;
      max-width: 1100px;
      margin: auto;
      padding: 2rem;
      background: #f5f7fa;
      color: #333;
      line-height: 1.6;
    }
    h1 { font-size: 2rem; color: #2a3d4c; margin: 0; }
    h2 { font-size: 1.2rem; color: #2a3d4c; margin: 1rem 0; }
    p { font-size: 1rem; margin: 0.8rem 0; }
    a { color: #0066cc; text-decoration: none; }
    a:hover { text-decoration: underline; color: #004499; }

    /* Search bar */
    .search-box {
      margin: 1.5rem 0;
      display: flex;
      gap: 0.5rem;
    }
    .search-box input {
      flex: 1;
      padding: 0.6rem 1rem;
      font-size: 1rem;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    .search-box button {
      padding: 0.6rem 1rem;
      font-size: 1rem;
      background: #327ab7;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    /* Groups layout */
    .groups-row { display: flex; gap: 2rem; margin-top: 1.5rem; }
    .group-container { flex: 1; }
    .group {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-top: 0.5rem;
    }

    /* Buttons */
    .element {
      border: none;
      padding: 0.6rem 1rem;
      border-radius: 4px;
      font-weight: bold;
      font-size: 1rem;
      cursor: pointer;
      transition: transform 0.15s, box-shadow 0.15s;
      color: white;
    }
    .metals .element { background: #327ab7; }
    .carbides .element { background: #d97c1a; }
    .terminations .element { background: #2f8f43; }

    /* Table header sticky */
    #table-title {
      position: sticky;
      top: 0;
      background: #f5f7fa;
      padding: 10px;
      z-index: 2;
    }
  </style>
</head>
<body>

  <!-- Header -->
  <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1.2rem;">
    <img src="mxphon-logo.png" alt="MX-PHon Logo" style="height: 140px;">
    <h1>MXene Phonon Database</h1>
  </div>

  <!-- Intro -->
  <p><strong>MXenes</strong> are a family of two-dimensional materials composed of transition metal carbides, nitrides, or carbonitrides, derived from their bulk MAX phases. They exhibit metallic conductivity, tunable surface chemistry, and a layered structure—making them attractive for energy storage, electronics, and sensors. This database provides crystal structures and phonon dispersions of selected MXenes.</p>
  <p>Select a chemical building block below or search directly for a compound:</p>

  <!-- Search -->
  <div class="search-box">
    <input type="text" id="searchInput" placeholder="Search compound (e.g. La2C_Cl2)">
    <button onclick="searchCompound()">Search</button>
  </div>

  <!-- Metals + Carbides side by side -->
  <div class="groups-row">
    <div class="group-container">
      <h2>Metals</h2>
      <div class="group metals" id="metals"></div>
    </div>
    <div class="group-container">
      <h2>Carbide / Nitride</h2>
      <div class="group carbides" id="carbides"></div>
    </div>
  </div>

  <!-- Terminations below -->
  <h2 style="margin-top:2rem;">Surface Termination</h2>
  <div class="group terminations" id="terminations"></div>

  <!-- Compounds table -->
  <h2 id="table-title">All MXene Compounds</h2>
  <p id="compound-count"></p>
  <table id="compounds-table" class="display" style="width:100%">
    <thead>
      <tr>
        <th>Formula</th>
        <th>Elements</th>
        <th>Atoms/Cell</th>
        <th>Space Group</th>
        <th>Unstable</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <!-- Scripts -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
  <script>
    const metals = ["Ti","Sc","Hf","Zr","Y","La"];
    const carbides = ["C","N"];
    const terminations = ["H","O","Cl","Br","F","CN","NCS","NCO","NO","OCl","OCN","OH","PO","SCN"];
    let table;

    fetch("compounds.json")
      .then(res => res.json())
      .then(data => {
        const compounds = Object.entries(data).map(([formula, props]) => ({
          formula,
          elements: props.elements ? props.elements.join(", ") : "",
          atoms: props.atoms_per_cell || "",
          group: props.space_group || "",
          stable: props.unstable || ""
        }));

        table = $('#compounds-table').DataTable({
          data: compounds,
          columns: [
            { data: "formula", render: d => `<a href="viewer.html?material=${d}" target="_blank">${d.replace(/(\\d+)/g,"<sub>$1</sub>")}</a>` },
            { data: "elements" },
            { data: "atoms" },
            { data: "group" },
            { data: "stable" }
          ]
        });
      });

    function renderGroup(id, items) {
      const container = document.getElementById(id);
      items.forEach(sym => {
        const btn = document.createElement("button");
        btn.className = "element element-btn";
        btn.textContent = sym;
        btn.onclick = () => filterByElement(sym);
        container.appendChild(btn);
      });
    }

    function filterByElement(el) {
      if (!table) return;
      table.column(1).search(el).draw();
      const count = table.rows({ search: 'applied' }).count();
      document.getElementById("compound-count").textContent =
        `MXene Compounds with "${el}" : ${count} MXenes found`;
      document.getElementById("table-title").scrollIntoView({ behavior: 'smooth' });
    }

    function searchCompound() {
      const query = document.getElementById("searchInput").value.trim();
      if (!table) return;
      table.search(query).draw();
      const count = table.rows({ search: 'applied' }).count();
      document.getElementById("compound-count").textContent =
        `Search results for "${query}" : ${count} found`;
      document.getElementById("table-title").scrollIntoView({ behavior: 'smooth' });
    }

    renderGroup("metals", metals);
    renderGroup("carbides", carbides);
    renderGroup("terminations", terminations);
  </script>
</body>
</html>

