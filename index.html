<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MX-PHon - MAXene Phonon Database</title>
  <style>
    body {
      font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
      max-width: 1000px;
      margin: auto;
      padding: 2rem;
      background: #fafafa;
      color: #2c3e50;
    }
    h1 {
      color: #2c3e50;
      font-size: 2.2rem;
      margin: 0;
    }
    h2 {
      margin-top: 1.5rem;
      font-size: 1.4rem;
      color: #34495e;
    }
    p {
      line-height: 1.6;
      font-size: 1rem;
    }

    /* Groups layout */
    .groups-row {
      display: flex;
      flex-wrap: wrap;
      gap: 3rem;
      margin-top: 1rem;
      align-items: flex-start;
    }
    .group {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-top: 0.5rem;
    }

    /* Element buttons */
    .element {
      border: none;
      padding: 0.5rem 0.8rem;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
      transition: transform 0.15s ease, box-shadow 0.15s ease;
      color: #fff;
    }
    .element:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 10px rgba(0,0,0,0.15);
    }
    .metal { background: #3498db; }
    .carbide { background: #e67e22; }
    .termination { background: #27ae60; }

    /* Tooltip */
    .tooltip {
      position: relative;
      display: inline-block;
    }
    .tooltiptext {
      visibility: hidden;
      width: max-content;
      max-width: 200px;
      background-color: #2a3d4c;
      color: #fff;
      text-align: center;
      border-radius: 6px;
      padding: 4px 8px;
      font-size: 0.85rem;
      position: absolute;
      z-index: 1;
      bottom: 125%;
      left: 50%;
      transform: translateX(-50%);
      opacity: 0;
      transition: opacity 0.2s;
      white-space: nowrap;
    }
    .tooltiptext::after {
      content: "";
      position: absolute;
      top: 100%;
      left: 50%;
      margin-left: -5px;
      border-width: 5px;
      border-style: solid;
      border-color: #2a3d4c transparent transparent transparent;
    }
    .tooltip:hover .tooltiptext {
      visibility: visible;
      opacity: 1;
    }

    /* Modal */
    .modal {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      display: none;
      justify-content: center;
      align-items: center;
    }
    .modal-content {
      background: #fff;
      padding: 1.5rem;
      border-radius: 10px;
      max-width: 600px;
      width: 90%;
      max-height: 80%;
      overflow-y: auto;
    }
    .modal-header {
      font-size: 1.2rem;
      font-weight: bold;
      margin-bottom: 0.8rem;
    }
    .close-btn {
      float: right;
      cursor: pointer;
      color: #888;
      font-size: 1.4rem;
    }
    .compound-item {
      margin-bottom: 0.8rem;
      font-size: 0.95rem;
    }
    .compound-item a {
      color: #3498db;
      text-decoration: none;
    }
    .compound-item a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <div style="display: flex; align-items: center; gap: 1rem;">
    <img src="mxphon-logo.png" alt="MX-PHon Logo" style="height: 120px;">
    <h1>MXene Phonon Database</h1>
  </div>

  <p><strong>MXenes</strong> are a family of two-dimensional materials composed of transition metal carbides, nitrides, or carbonitrides. They are derived from their bulk MAX phases. MXenes are known for their unique combination of metallic conductivity, tunable surface chemistry, and layered structure. They are of great interest for applications in energy storage, sensors, electronics, and beyond. This database gives the crystal structure and phonon dispersion of selected MXenes.</p>
  <p>Select building blocks below to explore compounds:</p>

  <div class="groups-row">
    <div>
      <h2>Metals</h2>
      <div class="group" id="metals"></div>
    </div>
    <div>
      <h2>Carbide / Nitride</h2>
      <div class="group" id="carbides"></div>
    </div>
  </div>

  <h2>Surface Termination</h2>
  <div class="group" id="terminations"></div>

  <!-- Modal -->
  <div id="elementModal" class="modal">
    <div class="modal-content">
      <span id="closeModal" class="close-btn">&times;</span>
      <div class="modal-header" id="modalTitle"></div>
      <div id="compoundProperties"></div>
    </div>
  </div>

  <script>
    const metals = ["Ti","Sc","Hf","Zr","Y","La"];
    const carbides = ["C","N"];
    const terminations = ["H","O","Cl","Br","F","CN","NCS","NCO","NO","OCl","OCN","OH","PO","SCN"];

    const elementNames = {
      Ti: "Titanium", Sc: "Scandium", Hf: "Hafnium", Zr: "Zirconium", Y: "Yttrium", La: "Lanthanum",
      C: "Carbon", N: "Nitrogen",
      H: "Hydrogen", O: "Oxygen", Cl: "Chlorine", Br: "Bromine", F: "Fluorine",
      CN: "Cyano", NCS: "Thiocyanato", NCO: "Fulminato", NO: "Nitrosyl",
      OCl: "Hypochlorite", OCN: "Cyanato", OH: "Hydroxyl", PO: "Phosphoryl", SCN: "Thiocyanate"
    };

    let compoundsDB = {};
    fetch("compounds.json")
      .then(res => res.json())
      .then(data => { compoundsDB = data; });

    const modal = document.getElementById("elementModal");
    const closeModal = document.getElementById("closeModal");
    const modalTitle = document.getElementById("modalTitle");
    const compoundProperties = document.getElementById("compoundProperties");

    function renderGroup(id, items, type) {
      const container = document.getElementById(id);
      items.forEach(sym => {
        const wrapper = document.createElement("span");
        wrapper.className = "tooltip";

        const btn = document.createElement("button");
        btn.className = `element ${type}`;
        btn.textContent = sym;
        btn.onclick = () => showModal(sym);

        const tooltip = document.createElement("span");
        tooltip.className = "tooltiptext";
        tooltip.textContent = elementNames[sym] || sym;

        wrapper.appendChild(btn);
        wrapper.appendChild(tooltip);
        container.appendChild(wrapper);
      });
    }

    function showModal(symbol) {
      const list = Object.entries(compoundsDB)
        .filter(([_, props]) => props.elements.includes(symbol));

      modal.style.display = "flex";
      modalTitle.textContent = `MXene Compounds with "${symbol}" (${elementNames[symbol] || ""})`;

      compoundProperties.innerHTML = "";
      if (list.length) {
        list.forEach(([compound, props]) => {
          const div = document.createElement("div");
          div.className = "compound-item";
          div.innerHTML = `<b>${compound}</b>: <a href="${props.path}index.html" target="_blank">View details</a>`;
          compoundProperties.appendChild(div);
        });
      } else {
        compoundProperties.textContent = "No MXene data available.";
      }
    }

    closeModal.onclick = () => modal.style.display = "none";
    window.onclick = e => { if (e.target === modal) modal.style.display = "none"; };

    renderGroup("metals", metals, "metal");
    renderGroup("carbides", carbides, "carbide");
    renderGroup("terminations", terminations, "termination");
  </script>
</body>
</html>
