
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Phonon MAXene Database</title>
  <script src="https://3Dmol.csb.pitt.edu/build/3Dmol-min.js"></script>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    ul#materialIndex { list-style: none; padding-left: 0; }
    ul#materialIndex li { margin: 8px 0; }
    ul#materialIndex li a { text-decoration: none; color: blue; cursor: pointer; }
    ul#materialIndex li a:hover { text-decoration: underline; }
    .viewer, .phonon { width: 100%; height: 400px; display: none; margin-top: 20px; }
  </style>
</head>
<body>
  <h1>ðŸ“š Phonon MAXene Database</h1>
  <p>Select a material to view its structure and phonon dispersion:</p>
  <ul id="materialIndex"></ul>

  <div id="viewer" class="viewer"></div>
  <div id="phononPlot" class="phonon"></div>

  <script>
    // Define available materials here
    const materialList = ["Ti2C", "V2C", "Nb2C"]; // Add more material names here

    const indexContainer = document.getElementById("materialIndex");
    const viewerDiv = document.getElementById("viewer");
    const phononDiv = document.getElementById("phononPlot");

    function loadMaterial(material) {
      viewerDiv.style.display = "block";
      phononDiv.style.display = "block";

      // Clear previous 3Dmol viewer
      viewerDiv.innerHTML = "";
      let viewer = $3Dmol.createViewer("viewer", { backgroundColor: "white" });
      $3Dmol.download(`materials/${material}/structure.cif`, viewer, {}, function () {
      viewer.setStyle({}, { stick: {}, sphere: { scale: 0.3 } });
      viewer.showUnitCell(true);  // ðŸ‘ˆ This adds the unit cell
      viewer.zoomTo();
      viewer.render();
      });	    

      // Clear previous plot
      phononDiv.innerHTML = "";
      fetch(`materials/${material}/phonon_band.json`)
        .then(res => res.json())
        .then(data => {
          const traces = data.frequencies[0].map((_, i) => ({
            x: data.qpoints,
            y: data.frequencies.map(f => f[i]),
            mode: 'lines',
            line: { width: 1 },
            name: `Mode ${i + 1}`
          }));
          const layout = {
            title: `Phonon Dispersion - ${material}`,
            xaxis: { title: "q-point", showgrid: false },
            yaxis: { title: "Frequency (THz)" }
          };
          Plotly.newPlot("phononPlot", traces, layout);
        });
    }

    // Generate clickable list
    materialList.forEach(mat => {
      const li = document.createElement("li");
      const a = document.createElement("a");
      a.textContent = mat;
      a.onclick = () => loadMaterial(mat);
      li.appendChild(a);
      indexContainer.appendChild(li);
    });
  </script>
</body>
</html>
