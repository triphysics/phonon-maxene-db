<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MX-PHon - MAXene Phonon Database</title>
  <style>
    body {
      font-family: sans-serif;
      max-width: 900px;
      margin: auto;
      padding: 2rem;
    }
    h1 {
      color: #2c3e50;
    }
    h2 {
      margin-top: 1.5rem;
      color: #34495e;
    }
    p {
      font-size: 1.05em;
      line-height: 1.5em;
    }
    .group {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }
    .element {
      border: 1px solid #ccc;
      padding: 0.5rem 0.7rem;
      cursor: pointer;
      border-radius: 6px;
      background: #f8f8f8;
      font-weight: bold;
    }
    .element:hover {
      background: #e0f0ff;
    }
    /* Modal */
    .modal {
      position: fixed; top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      display: none; justify-content: center; align-items: center;
    }
    .modal-content {
      background: #fff; padding: 1rem; border-radius: 8px;
      max-width: 500px; width: 100%;
    }
    .modal-header {
      font-size: 1.2rem; font-weight: bold; margin-bottom: 0.5rem;
    }
    .close-btn {
      float: right; cursor: pointer; color: #888; font-size: 1.2rem;
    }
    a {
      text-decoration: none;
      color: #3498db;
    }
    a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <!-- Logo + title -->
  <div style="display: flex; align-items: center; gap: 1rem;">
    <img src="mxphon-logo.png" alt="MX-PHon Logo" style="height: 160px;">
    <h1 style="margin: 0;">MXene Phonon Database</h1>
  </div>

  <!-- Description -->
  <p><strong>MXenes</strong> are a family of two-dimensional materials composed of transition metal carbides, nitrides, or carbonitrides. They are derived from their bulk MAX phases. MXenes are known for their unique combination of metallic conductivity, tunable surface chemistry, and layered structure. They are of great interest for applications in energy storage, sensors, electronics, and beyond. This database gives the crystal structure and phonon dispersion of selected MXenes.</p>
  <p>Select a chemical building block below to view MXene compounds containing that element or termination:</p>

  <!-- Grouped selectors -->
  <h2>Metals</h2>
  <div class="group" id="metals"></div>

  <h2>Carbide / Nitride</h2>
  <div class="group" id="carbides"></div>

  <h2>Surface Termination</h2>
  <div class="group" id="terminations"></div>

  <!-- Modal -->
  <div id="elementModal" class="modal">
    <div class="modal-content">
      <span id="closeModal" class="close-btn">&times;</span>
      <div class="modal-header" id="modalTitle"></div>
      <div id="compoundProperties"></div>
    </div>
  </div>

  <script>
    const metals = ["Ti","Sc","Hf","Zr","Y"];
    const carbides = ["C","N"];
    const terminations = ["H","O","Cl","Br","F","CN","NCS","NCO","NO","OCl","OCN","OH","PO","SCN"];

    let compoundsDB = {};

    // Load compounds manifest
    fetch("compounds.json")
      .then(res => res.json())
      .then(data => { compoundsDB = data; });

    const modal = document.getElementById("elementModal");
    const closeModal = document.getElementById("closeModal");
    const modalTitle = document.getElementById("modalTitle");
    const compoundProperties = document.getElementById("compoundProperties");

    function renderGroup(containerId, symbols) {
      const container = document.getElementById(containerId);
      symbols.forEach(sym => {
        const cell = document.createElement("div");
        cell.className = "element";
        cell.innerText = sym;
        cell.onclick = () => showModal(sym);
        container.appendChild(cell);
      });
    }

    function showModal(symbol) {
      modal.style.display = "flex";
      modalTitle.innerText = `Compounds with ${symbol}`;

      // Find compounds that contain this symbol
      const results = Object.entries(compoundsDB).filter(([compound, props]) =>
        props.elements.includes(symbol)
      );

      if (results.length > 0) {
        compoundProperties.innerHTML = "<h3>MXene Compounds</h3>";
        results.forEach(([compound, props]) => {
          compoundProperties.innerHTML += `
            <div style="margin-bottom:0.8rem">
              <b>${compound}</b><br/>
              <a href="${props.path}index.html" target="_blank">View details</a>
            </div>
          `;
        });
      } else {
        compoundProperties.innerHTML = "<p>No MXene data available for this symbol.</p>";
      }
    }

    closeModal.onclick = () => (modal.style.display = "none");
    window.onclick = e => { if (e.target === modal) modal.style.display = "none"; };

    // Render groups
    renderGroup("metals", metals);
    renderGroup("carbides", carbides);
    renderGroup("terminations", terminations);
  </script>
</body>
</html>
