<!DOCTYPE html>
<html lang="en">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-0TNXENJD0T"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-0TNXENJD0T');
</script>
  <meta charset="UTF-8">
  <title>MX-PHon – MXene PHonon Database</title>
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css">
  <style>
    body {
      font-family: "Helvetica Neue", Arial, sans-serif;
      max-width: 1100px;
      margin: auto;
      padding: 2rem;
      background: #f5f7fa;
      color: #333;
      line-height: 1.6;
    }
    h1 { font-size: 2rem; color: #2a3d4c; margin: 0; }
    h2 { font-size: 1.2rem; color: #2a3d4c; margin: 1rem 0; }
    p { font-size: 1rem; margin: 0.8rem 0; }
    a { color: #0066cc; text-decoration: none; }
    a:hover { text-decoration: underline; color: #004499; }

    .search-box { margin: 1.5rem 0; display: flex; gap: 0.5rem; }
    .search-box input {
      flex: 1; padding: 0.6rem 1rem; font-size: 1rem;
      border: 1px solid #ccc; border-radius: 4px;
    }
    .search-box button {
      padding: 0.6rem 1rem; font-size: 1rem;
      background: #327ab7; color: white; border: none;
      border-radius: 4px; cursor: pointer;
    }

    .groups-row { display: flex; gap: 2rem; margin-top: 1.5rem; }
    .group-container { flex: 1; }
    .group { display: flex; flex-wrap: wrap; gap: 0.5rem; margin-top: 0.5rem; }

    .element {
      border: none; padding: 0.6rem 1rem; border-radius: 4px;
      font-weight: bold; font-size: 1rem; cursor: pointer;
      transition: transform 0.15s, box-shadow 0.15s; color: white;
    }
    .metals .element { background: #327ab7; }
    .carbides .element { background: #d97c1a; }
    .terminations .element { background: #2f8f43; }

    #table-title {
      position: sticky; top: 0; background: #f5f7fa;
      padding: 10px; z-index: 2;
    }
  </style>
</head>
<body>

  <!-- Header -->
  <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1.2rem;">
    <img src="mxphon-logo.png" alt="MX-PHon Logo" style="height: 140px;">
    <h1>MXene PHonon Database</h1>
  </div>

  <p><strong>MXenes</strong> are a family of two-dimensional materials composed of transition metal carbides, nitrides, or carbonitrides, derived from their bulk MAX phases. They exhibit metallic conductivity, tunable surface chemistry, and a layered structure—making them attractive for energy storage, electronics, and sensors. This database provides crystal structures and phonon dispersions of selected MXenes.</p>
  <p>Select a chemical building block below or search directly for a compound:</p>

  <!-- Search -->
  <div class="search-box">
    <input type="text" id="searchInput" placeholder="Search compound (e.g. La2C-O-H)">
    <button onclick="searchCompound()">Search</button>
  </div>

  <!-- Metals + Carbides -->
  <div class="groups-row">
    <div class="group-container">
      <h2>Metals</h2>
      <div class="group metals" id="metals"></div>
    </div>
    <div class="group-container">
      <h2>Carbide / Nitride</h2>
      <div class="group carbides" id="carbides"></div>
    </div>
  </div>

  <!-- Functional Groups -->
  <h2 style="margin-top:2rem;">Functional Groups</h2>
  <div class="group terminations" id="terminations"></div>

  <!-- Compounds table -->
  <h2 id="table-title">All MXene Compounds</h2>
  <p id="compound-count"></p>
  <table id="compounds-table" class="display" style="width:100%">
    <thead>
      <tr>
        <th>Formula</th>
        <th>Functional Groups</th>
        <th>Atoms/Cell</th>
        <th>Space Group</th>
        <th>Unstable</th>
        <th>Min freq (THz)</th>
        <!-- hidden helper columns -->
        <th style="display:none;">elements</th>
        <th style="display:none;">mxene_type</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <!-- Scripts -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
  <script>
    const metals = ["Ti","Sc","Hf","Zr","Y","La"];
    const carbides = ["C","N"];
    const terminations = ["H","O","Cl","Br","F","CN","NCS","NCO","NO","OCl","OCN","OH","PO","SCN"];
    let table;

    fetch("compounds.json")
      .then(res => res.json())
      .then(data => {
        const rows = Object.entries(data).map(([formula, props]) => {
          const elements = props.elements ? props.elements.join(", ") : "";
          const fgroups = props.functional_groups ? props.functional_groups.join(", ") : "";
          const root = (formula.split("-")[0] || "").trim();
          const mxene_type = root.endsWith("C") ? "carbide" : (root.endsWith("N") ? "nitride" : "other");
          return {
            formula,
            elements,
            functional_groups: fgroups,
            atoms: props.atoms_per_cell || "",
            group: props.space_group || "",
            stable: props.unstable || "",
            mfreq: props.min_freq || "",
            mxene_type
          };
        });

        table = $('#compounds-table').DataTable({
          data: rows,
          columns: [
            { data: "formula", render: d => `<a href="viewer.html?material=${d}" target="_blank">${d.replace(/(\\d+)/g,"<sub>$1</sub>")}</a>` },
            { data: "functional_groups" },
            { data: "atoms" },
            { data: "group" },
            { data: "stable" },
            { data: "mfreq" },
            { data: "elements", visible: false, name: "elements" },
            { data: "mxene_type", visible: false, name: "mxene_type" }
          ]
        });

        updateCount(rows.length);
      });

    function renderGroup(id, items, type) {
      const container = document.getElementById(id);
      items.forEach(sym => {
        const btn = document.createElement("button");
        btn.className = "element element-btn";
        btn.textContent = sym;
        btn.onclick = () => filterByCategory(sym, type);
        container.appendChild(btn);
      });
    }

    function resetFilters() {
      if (!table) return;
      table.search("").columns().search("");
      table.draw();
    }

    function filterByCategory(value, type) {
      if (!table) return;
      resetFilters();

      if (type === "metal") {
        table.column('elements:name').search(value).draw();
        updateFilteredCount(`MXene Compounds with "${value}" :`);
      } else if (type === "functional") {
        table.column(1).search(value).draw(); // functional_groups col
        updateFilteredCount(`MXenes with functional group "${value}" :`);
      } else if (type === "carbide_nitride") {
        const col = table.column('mxene_type:name');
        if (value === "C") {
          col.search("carbide").draw();
          updateFilteredCount("Carbide MXenes :");
        } else {
          col.search("nitride").draw();
          updateFilteredCount("Nitride MXenes :");
        }
      }
    }

    function updateFilteredCount(prefix) {
      const count = table.rows({ search: 'applied' }).count();
      document.getElementById("compound-count").textContent = `${prefix} ${count} MXenes found`;
      document.getElementById("table-title").scrollIntoView({ behavior: 'smooth' });
    }

    function searchCompound() {
      const query = document.getElementById("searchInput").value.trim();
      if (!table) return;
      table.columns().search("");
      table.search(query).draw();
      const count = table.rows({ search: 'applied' }).count();
      document.getElementById("compound-count").textContent =
        `Search results for "${query}" : ${count} found`;
      document.getElementById("table-title").scrollIntoView({ behavior: 'smooth' });
    }

    function updateCount(total) {
      document.getElementById("compound-count").textContent = `Total ${total} MXenes`;
    }

    renderGroup("metals", metals, "metal");
    renderGroup("carbides", carbides, "carbide_nitride");
    renderGroup("terminations", terminations, "functional");
  </script>

  <!-- Acknowledgment Section -->
  <h2 style="margin-top:2rem;">Acknowledgments</h2>
  <ul>
    <li>
	    This work was performed at the <a href="https://www.uantwerpen.be/en/research-groups/commit/" target="_blank">Computational Materials Modeling for Innovative Technologies</a> (COMMIT) Group, Department of Physics, 
      <a href="https://www.uantwerpen.be/en/" target="_blank">University of Antwerp</a>. 
      This work is supported by the 
      <a href="https://www.uantwerpen.be/en/" target="_blank">University of Antwerp</a> 
      and the 
      <a href="https://www.fwo.be/nl/" target="_blank">Research Foundation – Flanders (FWO)</a>.
    </li>
    <li>
      The computational resources and services used in this work are provided by the 
      <a href="https://www.vscentrum.be" target="_blank">VSC (Flemish Supercomputer Center)</a>, 
      funded by the 
      <a href="https://www.fwo.be/nl/" target="_blank">Research Foundation – Flanders (FWO)</a> 
      and the Flemish Government, Department of Economy, Science and Innovation (EWI).
    </li>
  </ul>

</body>
</html>

