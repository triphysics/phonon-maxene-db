<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>MXene Material Viewer</title>
  <script src="https://3Dmol.csb.pitt.edu/build/3Dmol-min.js"></script>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/js-yaml@4.1.0/dist/js-yaml.min.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>
    /* ... existing CSS unchanged ... */
  </style>
</head>
<body>
<div class="container">
  <h1 id="material-title">Material Viewer</h1>

  <div class="main-grid">
    <div class="structure-card card">
      <div class="card-header">
        <span>ðŸ§Š</span>
        <span>Structure</span>
      </div>
      <div class="card-content">
        <div id="structureStatus" class="loading">Loading crystal structure...</div>
        
        <div class="button-group">
          <button class="btn" id="zoom-in-btn">Zoom In</button>
          <button class="btn" id="zoom-out-btn">Zoom Out</button>
          <button class="btn btn-secondary" id="home-btn">Reset</button>
        </div>
        
        <!-- Viewer container -->
        <div id="viewer"></div>

        <div class="controls-grid">
          <div class="control-item">
            <label>Bonds</label>
            <input type="checkbox" id="cb-bonds" checked>
          </div>
          
          <div class="control-item">
            <label>Bond length</label>
            <input type="range" id="bond-threshold" min="1.5" max="3.5" step="0.1" value="2.9">
          </div>
          <!-- other controls ... -->
        </div>
        <!-- Removed 'Click to interact' -->
      </div>
    </div>

    <!-- other cards unchanged ... -->
  </div>
</div>

<script>
let viewer = null;
let cifData = null; 

// Initialize viewer on DOM ready
function load3DStructure() {
  const container = document.getElementById('viewer');
  viewer = $3Dmol.createViewer(container, {
    defaultcolors: $3Dmol.rasmolElementColors,
    backgroundColor: "white"
  });

  fetch("POSCAR.cif")
    .then(res => res.text())
    .then(data => {
      cifData = data;
      updateViewer();
      // Fit the model into view
      viewer.zoomTo({}, true);
      viewer.render();
      document.getElementById("structureStatus").style.display = 'none';
    })
    .catch(err => {
      document.getElementById("structureStatus").innerHTML =
        `<div class="error">Error loading POSCAR.cif: ${err.message}</div>`;
    });
}

function updateViewer() {
  if (!viewer || !cifData) return;

  viewer.clear();
  viewer.addModel(cifData, "cif");
  viewer.addUnitCell();
  viewer.replicateUnitCell(...viewerState.supercell);
  // styling and bonds logic unchanged ...
  viewer.render();
}

// Rest of script unchanged: controls init, data loading, etc.

document.addEventListener('DOMContentLoaded', () => {
  load3DStructure();
  loadStructuralData();
  loadPhononData();
  // event listeners unchanged...
});
</script>

<script>
  // Title formatting unchanged...
</script>

</body>
</html>

