<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Material Detail</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <script src="https://3Dmol.org/build/3Dmol-min.js"></script>
  <style>
    body { font-family: Arial; margin: 20px; }
    .section-title { font-weight: bold; margin-top: 20px; font-size: 1.2em; }
    .viewer { width: 100%; height: 400px; border: 1px solid #ccc; }
    table { border-collapse: collapse; margin-top: 10px; }
    td, th { border: 1px solid #aaa; padding: 4px 8px; }
  </style>
</head>
<body>

<h2>Material: <span id="materialName">...</span></h2>

<div class="section-title">ðŸ§Š Structure</div>
<div id="structureViewer" class="viewer"></div>

<div class="section-title">ðŸ“‰ Phonon Band Structure</div>
<div id="phononPlot" style="width: 100%; height: 400px;"></div>

<script>
// --- Load structure ---
fetch("structure.cif")
  .then(res => res.text())
  .then(data => {
    let viewer = $3Dmol.createViewer("structureViewer", { backgroundColor: "white" });
    viewer.addModel(data, "cif");
    viewer.setStyle({}, { stick: {}, sphere: { scale: 0.3 } });
    viewer.zoomTo();
    viewer.render();
  });

// --- Load phonon data ---
fetch("phonon_band.json")
  .then(res => res.json())
  .then(data => {
    const traces = data.bands.map((band, i) => ({
      x: data.qpoints,
      y: band,
      type: "scatter",
      mode: "lines",
      name: `Band ${i + 1}`,
      line: { color: "blue", width: 1 }
    }));

    Plotly.newPlot("phononPlot", traces, {
      title: "Phonon Band Structure",
      xaxis: { title: "q-point", showgrid: false },
      yaxis: { title: "Frequency (THz)", showgrid: false }
    }, { responsive: true });
  });

// Set title based on folder name
document.getElementById("materialName").textContent = window.location.pathname.split("/").slice(-2, -1)[0];
</script>

</body>
</html>

